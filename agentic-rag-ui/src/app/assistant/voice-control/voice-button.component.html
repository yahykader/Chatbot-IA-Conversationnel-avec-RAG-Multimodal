<!-- ============================================================================ -->
<!-- VOICE BUTTON - Version alignée avec le bouton Envoyer -->
<!-- ============================================================================ -->
<button
  class="btn btn-voice"
  [class]="getButtonClass()"
  [class.recording]="isRecording"
  [class.processing]="isProcessing"
  (click)="toggleRecording()"
  [disabled]="!isSupported || isProcessing"
  [title]="getTooltip()">
  
  <!-- Icône microphone -->
  @if (!isProcessing) {
    <i class="bi" 
       [class.bi-mic-fill]="isRecording"
       [class.bi-mic]="!isRecording">
    </i>
  }
  
  <!-- Spinner pendant transcription -->
  @if (isProcessing) {
    <span class="spinner-border spinner-border-sm" role="status">
      <span class="visually-hidden">Transcription...</span>
    </span>
  }
  
  <!-- Durée d'enregistrement (optionnel) -->
  @if (isRecording && getRecordingDuration()) {
    <span class="recording-duration">{{ getRecordingDuration() }}</span>
  }
</button>

<!-- Message si non supporté (en dessous) -->
@if (!isSupported) {
  <span class="text-danger small d-block mt-1" style="font-size: 0.7rem;">
    <i class="bi bi-exclamation-triangle"></i>
    Micro non disponible
  </span>
}

<!-- Message d'erreur (en dessous) -->
@if (errorMessage) {
  <div class="alert alert-danger alert-sm mt-1 mb-0" role="alert" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">
    <i class="bi bi-exclamation-circle"></i>
    {{ errorMessage }}
  </div>
}