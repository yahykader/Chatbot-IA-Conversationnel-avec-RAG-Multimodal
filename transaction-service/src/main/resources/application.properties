spring.application.name=transaction-service
server.port=8090
#spring.datasource.url=jdbc:h2:mem:transactions-db
#spring.h2.console.enabled=true

OPEN_AI_API_KEY=${OPEN_AI_API_KEY}
#langchain4j.open-ai.chat-model.model-name=gpt-4o
#langchain4j.open-ai.chat-model.api-key=${OPEN_AI_API_KEY}
#langchain4j.open-ai.chat-model.temperature=0.7
#langchain4j.open-ai.chat-model.max-tokens=2000

#langchain4j.open-ai.streaming-chat-model.model-name=gpt-4o
#langchain4j.open-ai.streaming-chat-model.api-key=${OPEN_AI_API_KEY}
#langchain4j.open-ai.streaming-chat-model.temperature=0.7
#langchain4j.open-ai.streaming-chat-model.max-tokens=2000
#==============================================================================
# Configuration RAG
#==============================================================================
assistant.stream.timeout-seconds=120
# ============================================================================
# Configuration RAG
# ============================================================================
rag.min-score=0.6
rag.max-retries=3
rag.retry-delay-ms=1000
rag.parallel-search-threads=4
rag.cache-enabled=true
rag.cache-ttl-seconds=300

# Configuration du cache Spring (si cache activé)
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=300s
# ============================================================================
# Configuration RAG Tools (ENRICHI)
# ============================================================================
rag.tools.max-document-results=5
rag.tools.max-image-results=3
rag.tools.max-multimodal-results=4
rag.tools.min-query-length=3
rag.tools.max-query-length=500
rag.tools.max-result-text-length=1000
rag.tools.show-metrics=true
rag.tools.filter-by-document-type=true
rag.tools.include-metadata=true

# =============================================================================
# Logging Configuration LLM Requests and Responses
# =============================================================================
langchain4j.open-ai.chat-model.log-requests=true
langchain4j.open-ai.chat-model.log-responses=true

langchain4j.open-ai.streaming-chat-model.log-requests=true
langchain4j.open-ai.streaming-chat-model.log-responses=false

logging.level.dev.langchain4j=DEBUG
logging.level.dev.ai4j.openai4j=DEBUG
logging.level.ai.djl=OFF


# Extensions autorisées (accepter tout)
assistant.upload.allowed-extensions=*

# OU spécifier les extensions
assistant.upload.allowed-extensions=pdf,png,jpg,jpeg,gif,bmp,webp,tiff,txt,md,csv,json,xml,html,docx,doc,pptx,ppt,xlsx,xls,log,java,py,js,ts,cpp,c,h


# =============================================================================
# File Upload Configuration
# =============================================================================
assistant.upload.max-file-size=20971520
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.enabled=true

# =============================================================================
# Logging Configuration
# =============================================================================
logging.level.root=INFO
logging.level.com.exemple=DEBUG
logging.level.dev.langchain4j=DEBUG
logging.level.org.springframework.web=INFO
logging.level.reactor.netty=INFO

# =============================================================================
# Actuator (Optionnel - pour monitoring)
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always


# =============================================================================
# POSTGRESQL + PGVECTOR CONFIGURATION
# =============================================================================
pgvector.host=${PGVECTOR_HOST:localhost}
pgvector.port=${PGVECTOR_PORT:5432}
pgvector.database=${PGVECTOR_DATABASE:vectordb}
pgvector.user=${PGVECTOR_USER:admin}
pgvector.password=${PGVECTOR_PASSWORD:1234}

# =============================================================================
# SPRING DATA JPA (Optionnel si vous utilisez JPA pour d'autres entités)
# =============================================================================
spring.datasource.url=jdbc:postgresql://${pgvector.host}:${pgvector.port}/${pgvector.database}
spring.datasource.username=${pgvector.user}
spring.datasource.password=${pgvector.password}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=create
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Désactiver les caches Hibernate
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false
spring.jpa.properties.javax.persistence.sharedCache.mode=NONE

# ============================================================================
# application.properties - Configuration PUBLIQUE
# NE PAS mettre de secrets ici !
# ============================================================================

# PgVector Configuration
pgvector.host=${PGVECTOR_HOST:localhost}
pgvector.port=${PGVECTOR_PORT:5432}
pgvector.database=${PGVECTOR_DATABASE:vectordb}
pgvector.user=${PGVECTOR_USER:admin}
pgvector.password=${PGVECTOR_PASSWORD:1234}
pgvector.dimension=1536
pgvector.connection.pool.size=10
pgvector.connection.timeout=30
pgvector.validation.enabled=true

# OpenAI Configuration - UTILISER VARIABLES D'ENVIRONNEMENT
openai.api.key=${OPENAI_API_KEY}
openai.embedding.model=text-embedding-3-small
openai.chat.model=gpt-4o
openai.chat.temperature=0.7
openai.chat.max-tokens=2000
openai.chat.timeout-seconds=60
openai.chat.max-retries=3
openai.chat.log-requests=false
openai.chat.log-responses=false

# RAG Configuration
rag.min-score=0.6
rag.max-retries=3
rag.retry-delay-ms=1000
rag.parallel-search-threads=4
rag.cache-enabled=true
rag.cache-ttl-seconds=300

# RAG Tools
rag.tools.max-document-results=5
rag.tools.max-image-results=3
rag.tools.max-multimodal-results=4
rag.tools.min-query-length=3
rag.tools.max-query-length=500
rag.tools.max-result-text-length=1000
rag.tools.show-metrics=true

# Assistant
assistant.upload.max-file-size=10485760
assistant.upload.allowed-extensions=pdf,png,jpg,jpeg,gif,txt,docx,xlsx
assistant.chat.max-message-length=5000
assistant.chat.min-message-length=1
assistant.chat.timeout-seconds=120
assistant.stream.timeout-seconds=300
assistant.stream.heartbeat-interval-seconds=30


# Cache Configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=300s

# RAG Cache
rag.cache-enabled=true
rag.cache-ttl-seconds=300

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.defaults.enabled=true

# Logging
logging.level.com.exemple.transactionservice=INFO
logging.level.dev.langchain4j=DEBUG
logging.level.org.postgresql=WARN

# Tests
maven.test.skip=true

